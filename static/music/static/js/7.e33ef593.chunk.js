(this["webpackJsonpreact-music"]=this["webpackJsonpreact-music"]||[]).push([[7],{172:function(t,a,e){},183:function(t,a,e){"use strict";e.r(a),e.d(a,"default",(function(){return o}));var s=e(69),n=e(70),i=e(72),r=e(71),c=e(0),l=(e(172),e(12)),o=function(t){Object(i.a)(e,t);var a=Object(r.a)(e);function e(){var t;Object(s.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=a.call.apply(a,[this].concat(i))).state={songInfo:{},playStatus:!0,playUrl:"",lyric:[]},t}return Object(n.a)(e,[{key:"getSongDetail",value:function(){var t=this;this.$http.get("/song/detail",{params:{ids:this.props.match.params.id}}).then((function(a){t.setState({songInfo:a.songs[0].al})}))}},{key:"toggle",value:function(){var t=this;this.setState({playStatus:!this.state.playStatus},(function(){t.state.playStatus?t.refs.audio.pause():t.refs.audio.play()}))}},{key:"getPlayUrl",value:function(){var t=this;this.$http.get("/song/url",{params:{id:this.props.match.params.id}}).then((function(a){t.setState({playUrl:a.data[0].url})}))}},{key:"getLyric",value:function(){var t=this;this.$http.get("/lyric",{params:{id:this.props.match.params.id}}).then((function(a){var e=t.lyricFmt(a.lrc.lyric);t.setState({lyric:e})}))}},{key:"lyricFmt",value:function(t){var a=[];return t.replace(/(\[.*\])(.*)/g,(function(t,e,s){""!==s&&a.push(s)})),a}},{key:"UNSAFE_componentWillMount",value:function(){this.getSongDetail(),this.getPlayUrl(),this.getLyric()}},{key:"render",value:function(){var t=this;return Object(l.jsxs)("div",{className:"play-container",children:[Object(l.jsx)("div",{className:"play-tool",style:{transform:this.state.playStatus?"rotate(-15deg)":"rotate(0deg)"}}),Object(l.jsxs)("div",{className:"play-box",children:[Object(l.jsx)("img",{src:this.state.songInfo.picUrl,alt:""}),Object(l.jsx)("div",{onClick:function(){return t.toggle()},className:this.state.playStatus?"btn-pause":"btn-play"})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("h2",{children:this.state.songInfo.name}),this.state.lyric.map((function(t,a){return Object(l.jsx)("p",{children:t},a)}))]}),Object(l.jsx)("audio",{ref:"audio",src:this.state.playUrl,style:{display:"none"}})]})}},{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}}]),e}(c.Component)}}]);
//# sourceMappingURL=7.e33ef593.chunk.js.map